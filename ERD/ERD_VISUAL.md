# Rangira Agro Farming - ERD Visual Representation

## Database Overview

**Total Entities:** 9  
**Total Relationships:** 15 (including self-referencing)  
**Database Type:** PostgreSQL  
**Schema:** Auto-generated by Hibernate

## Entity Relationship Diagram (ASCII)

```
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                         RANGIRA AGRO FARMING SYSTEM                                  │
│                         Entity Relationship Diagram                                  │
└─────────────────────────────────────────────────────────────────────────────────────┘

                    ┌──────────────┐
                    │   LOCATION   │◄────┐ Self-referencing
                    │──────────────│     │ (parent/child)
                    │ PK: id       │     │
                    │ UK: code     │─────┘
                    │     name     │
                    │     level    │
                    │ FK: parent_id│
                    └──────┬───────┘
                           │
                 ┌─────────┴─────────┐
                 │                   │
                 ▼                   ▼
         ┌──────────────┐    ┌──────────────────┐
         │     USER     │    │ STORAGE_WAREHOUSE│
         │──────────────│    │──────────────────│
         │ PK: id       │    │ PK: id           │
         │ UK: code     │    │ UK: warehouse_code
         │ UK: email    │    │     name         │
         │ UK: phone    │    │     type         │
         │     type     │    │     capacity_kg  │
         │     status   │    │     status       │
         │ FK: location │    │ FK: location_id  │
         └──────┬───────┘    └────────┬─────────┘
                │ 1:1                 │
                │                     │
                ▼                     │
         ┌─────────────┐              │
         │USER_PROFILE │              │
         │─────────────│              │
         │ PK: id      │              │
         │ FK: user_id │              │
         │     bio     │              │
         │     gender  │              │
         └─────────────┘              │
                                      │
         ┌────────────────────────────┴───────────────┐
         │         WAREHOUSE_ACCESS                   │
         │         (Junction Table)                   │
         │────────────────────────────────────────────│
         │ PK: id                                     │
         │ FK: user_id                                │
         │ FK: warehouse_id                           │
         │     access_level                           │
         │     is_active                              │
         └────────────────────────────────────────────┘


         ┌──────────────┐
         │  CROP_TYPE   │
         │──────────────│
         │ PK: id       │
         │ UK: code     │
         │     name     │
         │     category │
         └──────┬───────┘
                │
                │ 1:N
                ▼
         ┌──────────────┐
         │  INVENTORY   │◄──────┐
         │──────────────│       │
         │ PK: id       │       │
         │ UK: code     │       │
         │ FK: farmer   │◄──────┼───────┐
         │ FK: keeper   │◄──────┼───┐   │
         │ FK: warehouse│───────┘   │   │
         │ FK: crop     │           │   │
         │     quantity │           │   │
         │     quality  │           │   │
         │     status   │           │   │
         └──────┬───────┘           │   │
                │ 1:N               │   │
                ▼                   │   │
         ┌──────────────┐           │   │
         │ TRANSACTION  │           │   │
         │──────────────│           │   │
         │ PK: id       │           │   │
         │ UK: code     │           │   │
         │ FK: inventory│           │   │
         │ FK: seller   │───────────┘   │
         │ FK: buyer    │───────────────┘
         │     quantity │
         │     price    │
         │     payment  │
         │     delivery │
         └──────┬───────┘
                │ 1:N
                ▼
         ┌──────────────┐
         │    RATING    │
         │──────────────│
         │ PK: id       │
         │ FK: transaction
         │ FK: rater    │─┐
         │ FK: rated_user─┼──► Both point to USER
         │     type     │ │
         │     value    │ │
         │     comment  │ │
         └──────────────┘ │
                          │
                          └─────────────────────┐
                                                │
                                                ▼
                                         ┌──────────────┐
                                         │     USER     │
                                         └──────────────┘
```

## Relationship Summary

### One-to-One (1:1)
- User ← → User_Profile

### One-to-Many (1:N)
- Location → User
- Location → Warehouse
- Location → Location (self)
- User (as Farmer) → Inventory
- User (as Storekeeper) → Inventory
- User (as Seller) → Transaction
- User (as Buyer) → Transaction
- User (as Rater) → Rating
- User (as Rated) → Rating
- Warehouse → Inventory
- Crop_Type → Inventory
- Inventory → Transaction
- Transaction → Rating

### Many-to-Many (M:N)
- User ↔ Warehouse_Access ↔ Warehouse

## Entity Descriptions

### Location
Self-referential hierarchy for Rwanda's administrative structure (Province → District → Sector → Cell → Village).

### User
System users with different roles: Admin, Farmer, Buyer, Storekeeper.

### User Profile
Extended user information including bio, gender, and identification details.

### Storage Warehouse
Physical storage facilities with capacity tracking and location.

### Warehouse Access
Junction table managing user permissions for warehouses.

### Crop Type
Agricultural product classifications.

### Inventory
Records of crops stored in warehouses.

### Transaction
Buy and sell operations between users.

### Rating
User feedback and quality ratings based on transactions.

## Data Seeding

The application automatically seeds:
- 30 Locations (5 provinces, 5 districts, 5 sectors, 5 cells, 10 villages)
- 8 Crop Types (Maize, Beans, Rice, Wheat, Potatoes, Cassava, Tomatoes, Cabbage)
- 5 Sample Users (Admin, Farmers, Buyer, Storekeeper)
- 3 Sample Warehouses
